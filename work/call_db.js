
var greenIcon = new L.Icon({
    iconUrl: './images/marker-icon-green.png',
    shadowUrl: './images/marker-shadow.png',
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
});

var RedIcon = new L.Icon({
    iconUrl: './images/marker-icon-red.png',
    shadowUrl: './images/marker-shadow.png',
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
});

var yellowIcon = new L.Icon({
    iconUrl: './images/marker-icon-yellow.png',
    shadowUrl: './images/marker-shadow.png',
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
});

function fetchData() {
    axios.get("/get-data")
        .then(response => {
            const data = response.data;
            // 全局变量，用于传送值
            window.processData = data;
        })
        .catch(error => {
            console.log("Error:", error);
        });
}

// function fetchAPI() {
//     axios.get("/get-API")
//         .then(response => {
//             const data = response.data;
//             // 全局变量，用于传送值
//             window.RouteData = data;
//         })
//         .catch(error => {
//             console.log("Error:", error);
//         });
// }

window.RouteData_1 = "{\n  \"status_message\": \"Found route between points\",\n  \"route_geometry\": \"mnxF}uwxR@T]tAi@g@eAaBa@s@mAsBkAkBGIQWYa@_@]a@[[U]Js@Lq@NWJo@`@mB`Bo@l@a@`@yAnCGLINgAtB_@l@aAtAIHU\\\\Y`@i@Xw@b@g@pAMh@Op@MDcD`Ce@X_@Jo@?wA?mDES@Y@{@?qDLmCNmAN]Dq@RgDnAu@f@sA|@mDtCaBz@cAVyCr@mBl@_FzA{Jl@sEJuA@q@COFa@LcA^iEpA{AGaBg@}E{B_Bs@kBy@MIgAm@]WkBmBMKt@}A|B{EbByDJ[y@Ys@UQIc@JGF\",\n  \"status\": 0,\n  \"route_instructions\": [\n    [\n      \"Left\",\n      \"NEIL ROAD\",\n      13,\n      \"1.277354,103.837274\",\n      2,\n      \"13m\",\n      \"West\",\n      \"North\",\n      \"driving\",\n      \"Head West On Neil Road\"\n    ],\n    [\n      \"Slight Right\",\n      \"NEIL ROAD\",\n      51,\n      \"1.277338,103.837163\",\n      11,\n      \"51m\",\n      \"West\",\n      \"West\",\n      \"driving\",\n      \"Make A Slight Right To Stay On Neil Road\"\n    ],\n    [\n      \"Right\",\n      \"EU TONG SEN STREET\",\n      402,\n      \"1.277488,103.836733\",\n      47,\n      \"402m\",\n      \"North East\",\n      \"West\",\n      \"driving\",\n      \"Turn Right Onto Eu Tong Sen Street\"\n    ],\n    [\n      \"Slight Left\",\n      \"OUTRAM ROAD\",\n      670,\n      \"1.279721,103.83954\",\n      76,\n      \"670m\",\n      \"North West\",\n      \"North East\",\n      \"driving\",\n      \"Make A Slight Left Onto Outram Road\"\n    ],\n    [\n      \"Slight Left\",\n      \"TIONG BAHRU ROAD\",\n      275,\n      \"1.28387,103.835411\",\n      31,\n      \"275m\",\n      \"North West\",\n      \"North West\",\n      \"driving\",\n      \"Make A Slight Left Onto Tiong Bahru Road\"\n    ],\n    [\n      \"Slight Right\",\n      \"ZION ROAD\",\n      1224,\n      \"1.28546,103.833666\",\n      138,\n      \"1224m\",\n      \"North\",\n      \"North West\",\n      \"driving\",\n      \"Make A Slight Right Onto Zion Road\"\n    ],\n    [\n      \"Straight\",\n      \"HOOT KIAM ROAD\",\n      406,\n      \"1.295602,103.830285\",\n      46,\n      \"406m\",\n      \"North\",\n      \"North West\",\n      \"driving\",\n      \"Continue Onto Hoot Kiam Road\"\n    ],\n    [\n      \"Slight Left\",\n      \"PATERSON HILL\",\n      246,\n      \"1.299235,103.830006\",\n      28,\n      \"246m\",\n      \"North West\",\n      \"North\",\n      \"driving\",\n      \"Make A Slight Left Onto Paterson Hill\"\n    ],\n    [\n      \"Straight\",\n      \"PATERSON ROAD\",\n      504,\n      \"1.301303,103.829372\",\n      58,\n      \"504m\",\n      \"North\",\n      \"North\",\n      \"driving\",\n      \"Continue Onto Paterson Road\"\n    ],\n    [\n      \"Right\",\n      \"ORCHARD ROAD\",\n      335,\n      \"1.305109,103.831754\",\n      43,\n      \"335m\",\n      \"South East\",\n      \"North East\",\n      \"driving\",\n      \"Turn Right Onto Orchard Road\"\n    ],\n    [\n      \"Left\",\n      \"MOUNT ELIZABETH\",\n      79,\n      \"1.303649,103.834386\",\n      15,\n      \"79m\",\n      \"North\",\n      \"East\",\n      \"driving\",\n      \"Turn Left Onto Mount Elizabeth\"\n    ],\n    [\n      \"Left\",\n      \"NUTMEG ROAD\",\n      28,\n      \"1.304286,103.834683\",\n      6,\n      \"28m\",\n      \"North\",\n      \"North East\",\n      \"driving\",\n      \"Turn Left Onto Nutmeg Road\"\n    ],\n    [\n      \"Destination\",\n      \"NUTMEG ROAD\",\n      0,\n      \"1.304507,103.834575\",\n      0,\n      \"0m\",\n      \"North\",\n      \"North West\",\n      \"driving\",\n      \"You Have Arrived At Your Destination\"\n    ]\n  ],\n  \"route_name\": [\n    \"OUTRAM ROAD\",\n    \"ZION ROAD\"\n  ],\n  \"route_summary\": {\n    \"start_point\": \"NEIL ROAD\",\n    \"end_point\": \"NUTMEG ROAD\",\n    \"total_time\": 497,\n    \"total_distance\": 4228\n  },\n  \"viaRoute\": \"HOOT KIAM ROAD\",\n  \"subtitle\": \"Shortest distance\"\n}";
window.RouteData_2 = "{\n  \"status_message\": \"Found route between points\",\n  \"route_geometry\": \"ur_Gs{ayRMgAjAOR`BNj@FJFJHHJHJHJFJDLDNBLBL@N?LAdC[J?\\\\AtGkAvIqA|Ce@@CeC`@M}@|F_Ad@Ed@Bd@F^NZRRRTZRd@Hj@JhArBhUBXPlADNBHL^LXr@~@RP^LFBABw@j@OSMJ??v@r@SRgB`Bw@~@mA|AKLGJ_AzA[`Ay@hBo@pBqApEu@bDWjBI|ABtBOj@Wj@k@f@m@\\\\q@^QVWz@s@hCU|@Ef@?h@B\\\\DXRb@@Pe@X{ClB[PFTDPL^DVF\\\\HXJf@BT?R?N?\\\\Ad@IPIxEVhERhABLBLr@zD@Fx@pEHf@PpAr@xEFZd@nAFPJJnBlBp@v@vApA~EpF`FvFHHKFoC`BKF~@zDDv@?dAFn@|AlBtDlDg@j@q@r@c@^oBhBnBdAfAn@j@^gDtDcAhAbAbAaBfBw@xA\",\n  \"status\": 0,\n  \"route_instructions\": [\n    [\n      \"Left\",\n      \"LORONG 40 GEYLANG\",\n      41,\n      \"1.313871,103.889382\",\n      19,\n      \"41m\",\n      \"East\",\n      \"North\",\n      \"cycling\",\n      \"Head East On Lorong 40 Geylang\"\n    ],\n    [\n      \"Right\",\n      \"LORONG 40 GEYLANG\",\n      44,\n      \"1.313944,103.889739\",\n      20,\n      \"44m\",\n      \"South\",\n      \"East\",\n      \"cycling\",\n      \"Turn Right To Stay On Lorong 40 Geylang\"\n    ],\n    [\n      \"Right\",\n      \"Geylang Park Connector\",\n      738,\n      \"1.313556,103.889817\",\n      295,\n      \"738m\",\n      \"West\",\n      \"South\",\n      \"cycling\",\n      \"Turn Right Onto Geylang Park Connector\"\n    ],\n    [\n      \"Sharp Left\",\n      \"Geylang Park Connector\",\n      1194,\n      \"1.307784,103.889852\",\n      435,\n      \"1194m\",\n      \"North\",\n      \"South East\",\n      \"cycling\",\n      \"Make A Sharp Left To Stay On Geylang Park Connector\"\n    ],\n    [\n      \"Right\",\n      \"MOUNTBATTEN ROAD\",\n      292,\n      \"1.304681,103.883613\",\n      105,\n      \"292m\",\n      \"North West\",\n      \"South West\",\n      \"cycling\",\n      \"Turn Right Onto Mountbatten Road\"\n    ],\n    [\n      \"Straight\",\n      \"MOUNTBATTEN ROAD\",\n      397,\n      \"1.30639,103.881637\",\n      143,\n      \"397m\",\n      \"West\",\n      \"North West\",\n      \"cycling\",\n      \"Continue Straight To Stay On Mountbatten Road\"\n    ],\n    [\n      \"Straight\",\n      \"MOUNTBATTEN ROAD\",\n      180,\n      \"1.307741,103.878339\",\n      65,\n      \"180m\",\n      \"West\",\n      \"West\",\n      \"cycling\",\n      \"Keep Straight Onto Mountbatten Road\"\n    ],\n    [\n      \"Straight\",\n      \"SIMS WAY\",\n      204,\n      \"1.307893,103.876742\",\n      74,\n      \"204m\",\n      \"West\",\n      \"West\",\n      \"cycling\",\n      \"Continue Onto Sims Way\"\n    ],\n    [\n      \"Straight\",\n      \"KALLANG AIRPORT WAY\",\n      219,\n      \"1.308998,103.875369\",\n      80,\n      \"219m\",\n      \"West\",\n      \"West\",\n      \"cycling\",\n      \"Continue Onto Kallang Airport Way\"\n    ],\n    [\n      \"Slight Right\",\n      \"KALLANG AIRPORT DRIVE\",\n      160,\n      \"1.309254,103.873499\",\n      64,\n      \"160m\",\n      \"West\",\n      \"South West\",\n      \"cycling\",\n      \"Keep Right Onto Kallang Airport Drive\"\n    ],\n    [\n      \"Left\",\n      \"Kallang Riverside Park\",\n      183,\n      \"1.31035,103.872638\",\n      66,\n      \"183m\",\n      \"West\",\n      \"North West\",\n      \"cycling\",\n      \"Turn Left Onto Kallang Riverside Park\"\n    ],\n    [\n      \"Slight Right\",\n      \"GEYLANG ROAD\",\n      247,\n      \"1.31002,103.871053\",\n      90,\n      \"247m\",\n      \"North West\",\n      \"West\",\n      \"cycling\",\n      \"Make A Slight Right Onto Geylang Road\"\n    ],\n    [\n      \"Straight\",\n      \"KALLANG ROAD\",\n      503,\n      \"1.309995,103.868858\",\n      182,\n      \"503m\",\n      \"West\",\n      \"West\",\n      \"cycling\",\n      \"Continue Onto Kallang Road\"\n    ],\n    [\n      \"Straight\",\n      \"KALLANG ROAD\",\n      449,\n      \"1.308863,103.864479\",\n      162,\n      \"449m\",\n      \"South West\",\n      \"West\",\n      \"cycling\",\n      \"Continue Straight To Stay On Kallang Road\"\n    ],\n    [\n      \"Straight\",\n      \"VICTORIA STREET\",\n      195,\n      \"1.306201,103.861478\",\n      76,\n      \"195m\",\n      \"South West\",\n      \"South West\",\n      \"cycling\",\n      \"Continue Onto Victoria Street\"\n    ],\n    [\n      \"Right\",\n      \"JALAN SULTAN\",\n      113,\n      \"1.305022,103.860188\",\n      47,\n      \"113m\",\n      \"North West\",\n      \"South West\",\n      \"cycling\",\n      \"Turn Right Onto Jalan Sultan\"\n    ],\n    [\n      \"Left\",\n      \"ROCHOR CANAL ROAD\",\n      428,\n      \"1.305862,103.859616\",\n      158,\n      \"428m\",\n      \"West\",\n      \"North West\",\n      \"cycling\",\n      \"Turn Left Onto Rochor Canal Road\"\n    ],\n    [\n      \"Right\",\n      \"WELD ROAD\",\n      186,\n      \"1.304093,103.856394\",\n      79,\n      \"186m\",\n      \"North West\",\n      \"South West\",\n      \"cycling\",\n      \"Turn Right Onto Weld Road\"\n    ],\n    [\n      \"Left\",\n      \"JALAN BESAR\",\n      152,\n      \"1.305278,103.855221\",\n      60,\n      \"152m\",\n      \"South West\",\n      \"North West\",\n      \"cycling\",\n      \"Turn Left Onto Jalan Besar\"\n    ],\n    [\n      \"Right\",\n      \"DUNLOP STREET\",\n      195,\n      \"1.304137,103.854474\",\n      79,\n      \"195m\",\n      \"North West\",\n      \"South West\",\n      \"cycling\",\n      \"Turn Right Onto Dunlop Street\"\n    ],\n    [\n      \"Left\",\n      \"MADRAS STREET\",\n      54,\n      \"1.305324,103.853188\",\n      24,\n      \"54m\",\n      \"South West\",\n      \"North West\",\n      \"cycling\",\n      \"Turn Left Onto Madras Street\"\n    ],\n    [\n      \"Right\",\n      \"CAMPBELL LANE\",\n      139,\n      \"1.304976,103.85285\",\n      51,\n      \"139m\",\n      \"North West\",\n      \"South West\",\n      \"cycling\",\n      \"Turn Right Onto Campbell Lane\"\n    ],\n    [\n      \"Right\",\n      \"CAMPBELL LANE\",\n      0,\n      \"1.305751,103.851878\",\n      0,\n      \"0m\",\n      \"North\",\n      \"North West\",\n      \"cycling\",\n      \"You Have Arrived At Your Destination, On The Right\"\n    ]\n  ],\n  \"route_name\": [\n    \"Geylang Park Connector\",\n    \"KALLANG ROAD\"\n  ],\n  \"route_summary\": {\n    \"start_point\": \"LORONG 40 GEYLANG\",\n    \"end_point\": \"CAMPBELL LANE\",\n    \"total_time\": 2364,\n    \"total_distance\": 6307\n  }\n}";
window.RouteData_3 = "{\n  \"status_message\": \"Found route between points\",\n  \"route_geometry\": \"s{|FabzxRl@T??@?D?VBJFp@f@FDVRn@f@JFDF@DB@XPFB?IPSHCFFNLNLJHH@J@F?FAHCDENOJMj@o@DIR?NKDC@ABAFEFGFENKLGBCHCLGRKFEFCJGPIJGJGHIDC@@LL@@DCBADEDBH`@|@Gt@QVWj@MBC@CJODMJBVJ@@BCJS?CfAd@t@Z\\\\s@??h@V@EFONNTGtAj@B@ZLHBj@PB@BA`@TB@@A@@F?J@VFt@XXLNJB?nAl@@?tAn@j@Vb@VHLBJBJb@HND@NBDDA??D@FDNLZTVRj@ZHDJHVRl@d@FDB@HRr@f@VRJHBB?@@B?@TNNLDBvAnAJRHCADf@^BADBB?D@l@d@@@@@ABNLGFb@\\\\BLBAR?b@VDAABrAfA@@NJVRVRHHrB~ABJ@BA@@@RNBBA?H?r@h@ZV\\\\P?@@@??JFBBRR@?@ATRBD`@Zj@`@BB^\\\\@DA?@@RN@BB?D?r@h@jDtC\\\\XJL@@?@@@JF@@BC@ABBz@n@DDA@NNBCrAhAFFRP`@ZJHXMh@LhAlAb@d@BB`CrCH\\\\T^BDJH?@A@RTHJBDN^DJDDDDDBHNFJHNNTDDTXBDBBNVBF?@BF?BHLH@RZHBh@UFCRBPAB?AAD??AAKAAAAAAAYA]\",\n  \"status\": 0,\n  \"route_instructions\": [\n    [\n      \"Right\",\n      \"\",\n      190,\n      \"1.299939,103.849447\",\n      137,\n      \"190m\",\n      \"South West\",\n      \"North\",\n      \"walking\",\n      \"Head Southwest\"\n    ],\n    [\n      \"Sharp Left\",\n      \"\",\n      26,\n      \"1.29855,103.848521\",\n      19,\n      \"26m\",\n      \"East\",\n      \"South West\",\n      \"walking\",\n      \"Make A Sharp Left\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      137,\n      \"1.298414,103.848691\",\n      99,\n      \"137m\",\n      \"South West\",\n      \"South East\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Slight Right\",\n      \"\",\n      157,\n      \"1.29749,103.848938\",\n      113,\n      \"157m\",\n      \"South\",\n      \"South East\",\n      \"walking\",\n      \"Make A Slight Right\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      15,\n      \"1.296311,103.849673\",\n      11,\n      \"15m\",\n      \"South West\",\n      \"South East\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      7,\n      \"1.29622,103.849575\",\n      5,\n      \"7m\",\n      \"South East\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Slight Right\",\n      \"\",\n      6,\n      \"1.296173,103.849609\",\n      5,\n      \"6m\",\n      \"South East\",\n      \"South East\",\n      \"walking\",\n      \"Keep Right At The Fork\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      160,\n      \"1.296136,103.849644\",\n      115,\n      \"160m\",\n      \"South West\",\n      \"South East\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      24,\n      \"1.295018,103.849956\",\n      17,\n      \"24m\",\n      \"South\",\n      \"South East\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      19,\n      \"1.294828,103.849867\",\n      14,\n      \"19m\",\n      \"South East\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      113,\n      \"1.294749,103.850013\",\n      81,\n      \"113m\",\n      \"South West\",\n      \"South East\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      27,\n      \"1.293971,103.849939\",\n      20,\n      \"27m\",\n      \"South West\",\n      \"South East\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      14,\n      \"1.293763,103.849821\",\n      10,\n      \"14m\",\n      \"South East\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      13,\n      \"1.293705,103.849932\",\n      9,\n      \"13m\",\n      \"South West\",\n      \"South East\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      421,\n      \"1.293628,103.849854\",\n      304,\n      \"421m\",\n      \"South\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      43,\n      \"1.290364,103.848148\",\n      31,\n      \"43m\",\n      \"South\",\n      \"West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      357,\n      \"1.290074,103.847964\",\n      258,\n      \"357m\",\n      \"South\",\n      \"West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      102,\n      \"1.287653,103.845919\",\n      73,\n      \"102m\",\n      \"South\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      40,\n      \"1.286993,103.845429\",\n      29,\n      \"40m\",\n      \"West\",\n      \"South West\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      42,\n      \"1.286829,103.845173\",\n      30,\n      \"42m\",\n      \"South\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Straight\",\n      \"\",\n      214,\n      \"1.286502,103.845066\",\n      154,\n      \"214m\",\n      \"North West\",\n      \"South\",\n      \"walking\",\n      \"Continue Straight\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      19,\n      \"1.285108,103.843801\",\n      14,\n      \"19m\",\n      \"South West\",\n      \"West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Straight\",\n      \"\",\n      242,\n      \"1.284981,103.843693\",\n      175,\n      \"242m\",\n      \"North West\",\n      \"South West\",\n      \"walking\",\n      \"Continue Straight\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      216,\n      \"1.283357,103.842351\",\n      155,\n      \"216m\",\n      \"South\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      7,\n      \"1.281887,103.84111\",\n      6,\n      \"7m\",\n      \"South\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      182,\n      \"1.28184,103.841124\",\n      131,\n      \"182m\",\n      \"South West\",\n      \"South\",\n      \"walking\",\n      \"Turn Right\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      297,\n      \"1.28063,103.840092\",\n      214,\n      \"297m\",\n      \"South East\",\n      \"South West\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Slight Left\",\n      \"\",\n      272,\n      \"1.278842,103.838341\",\n      196,\n      \"272m\",\n      \"South West\",\n      \"South West\",\n      \"walking\",\n      \"Keep Left At The Fork\"\n    ],\n    [\n      \"Left\",\n      \"\",\n      44,\n      \"1.277221,103.836959\",\n      32,\n      \"44m\",\n      \"East\",\n      \"South East\",\n      \"walking\",\n      \"Turn Left\"\n    ],\n    [\n      \"Right\",\n      \"\",\n      0,\n      \"1.27728,103.837339\",\n      0,\n      \"0m\",\n      \"North\",\n      \"East\",\n      \"walking\",\n      \"You Have Arrived At Your Destination, On The Right\"\n    ]\n  ],\n  \"route_name\": [\n    \"\"\n  ],\n  \"route_summary\": {\n    \"start_point\": \"\",\n    \"end_point\": \"\",\n    \"total_time\": 2445,\n    \"total_distance\": 3395\n  }\n}";
// 初始加载数据
fetchData();

// 每300秒重新加载数据
setInterval(fetchData, 300000);
